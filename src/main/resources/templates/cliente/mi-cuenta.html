<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:with="pageTitle='Mi Perfil'"
      th:insert="~{_layout :: html(content=~{::content})}">

<th:block th:fragment="content">
    <div class="container py-5">
        <div class="row">
            
            <!-- INICIO: Columna de Navegación Lateral (Ahora directamente aquí) -->
            <div class="col-lg-3">
                <div class="mb-4">
                    <h4 class="fw-bold">Mi Cuenta</h4>
                    <p class="text-muted">Gestiona tu información y pedidos.</p>
                </div>
                <div class="list-group shadow-sm account-nav">
                    <a th:href="@{/mi-cuenta}" class="list-group-item list-group-item-action py-3" 
                       th:classappend="${requestURI == '/mi-cuenta' ? 'active' : ''}">
                       <i class="bi bi-person-fill me-2"></i> Mi Perfil
                    </a>
                    <a th:href="@{/mis-pedidos}" class="list-group-item list-group-item-action py-3"
                       th:classappend="${#strings.startsWith(requestURI, '/mis-pedidos') ? 'active' : ''}">
                       <i class="bi bi-receipt me-2"></i> Mis Pedidos
                    </a>
                </div>
            </div>
            <!-- FIN: Columna de Navegación Lateral -->
            
            <!-- Columna de Contenido Principal -->
            <div class="col-lg-9 account-content">
                <div class="card shadow-sm">
                    <div class="card-body p-4 p-md-5">
                        <h3 class="card-title mb-4">Información del Perfil</h3>

                        <div th:if="${mensajeExito}" class="alert alert-success d-flex align-items-center" role="alert">
                            <i class="bi bi-check-circle-fill me-2"></i>
                            <div th:text="${mensajeExito}"></div>
                        </div>
                        
                        <form th:action="@{/mi-cuenta/actualizar}" th:object="${perfil}" method="post">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="nombre" th:field="*{nombre}" placeholder="Nombre">
                                        <label for="nombre">Nombre</label>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="apellido" th:field="*{apellido}" placeholder="Apellido">
                                        <label for="apellido">Apellido</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="email" th:field="*{email}" placeholder="Email" readonly>
                                <label for="email">Correo Electrónico (no editable)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="telefono" th:field="*{telefono}" placeholder="Teléfono">
                                <label for="telefono">Teléfono</label>
                            </div>
                             <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="direccion" th:field="*{direccion}" placeholder="Dirección">
                                <label for="direccion">Dirección</label>
                            </div>
                            <div class="d-flex justify-content-end">
                                <button type="submit" class="btn btn-primary px-4">Guardar Cambios</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</th:block>

</html>